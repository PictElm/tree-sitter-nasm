/// <reference path="node_modules/tree-sitter-cli/dsl.d.ts" />

module.exports = grammar({

    name: 'test',
  
    extras: $ => [
      $.comment,
      /\s/,
    ],
  
    rules: {
  
      comment: $ => seq(';', /.*\n/),
      word: $ => /[a-z]+/,
  
      // line ::= [label[:]] [prefix] [instr [opr{',' opr}]] '\n'
      line: $ => seq(
        optional(seq($.label, optional(':'))),
        //optional($.prefix),
        optional(seq($.instr,
          optional(seq($.opr, repeat(seq(',', $.opr))))
        )),
        '\n',
      ),
  
      label: $ => $.word,
      prefix: $ => $.word,
      instr: $ => $.word,
      opr: $ => $.word,
  
    },
  
  });
  